<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Timeline Galerie</title>
  <style>
    :root {
      --timeline-aspect-ratio: 2 / 3;
      --timeline-gap: 8px;
      --timeline-overlay-bg: rgba(0, 0, 0, 0.4);
    }

    body, html {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: sans-serif;
      background: #111;
    }

    .timeline-container {
      display: flex;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      height: 90vh;
      padding: 5vh 0;
      gap: var(--timeline-gap);
      scroll-behavior: smooth;
    }

    .timeline-container::-webkit-scrollbar {
      display: none;
    }

    .timeline-photo {
      flex: 0 0 auto;
      scroll-snap-align: center;
      aspect-ratio: var(--timeline-aspect-ratio);
      height: 100%;
      position: relative;
      overflow: hidden;
      border-radius: 10px;
      background: #000;
    }

    .timeline-photo img {
      height: 100%;
      width: auto;
      object-fit: cover;
      object-position: center;
      display: block;
    }

    .timeline-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      color: white;
      background: var(--timeline-overlay-bg);
      backdrop-filter: blur(6px);
      padding: 0.5em 1em;
      font-size: 0.95em;
      max-height: 4.5em;
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      transition: max-height 0.3s ease;
      cursor: pointer;
    }

    .timeline-caption.expanded {
      max-height: 70%;
      -webkit-line-clamp: unset;
    }

    .timeline-caption::after {
      content: '…';
      display: block;
      position: absolute;
      bottom: 0;
      right: 0;
      background: linear-gradient(to top, var(--timeline-overlay-bg), transparent);
      height: 1.5em;
      width: 100%;
      pointer-events: none;
    }

    .timeline-caption.expanded::after {
      display: none;
    }

    @media (max-width: 768px) {
      .timeline-container {
        height: 85vh;
      }
    }
  </style>
</head>
<body>

  <div class="timeline-container" id="timeline">
    <div class="timeline-photo">
      <img src="https://picsum.photos/id/1011/400/600" loading="lazy" alt="Obrázek 1" />
      <div class="timeline-caption">Popis fotografie jedna s velmi dlouhým textem který přesahuje tři řádky a proto bude možné ho rozkliknout.</div>
    </div>
    <div class="timeline-photo">
      <img src="https://picsum.photos/id/1012/400/600" loading="lazy" alt="Obrázek 2" />
      <div class="timeline-caption">Kratší popis fotografie dvě.</div>
    </div>
    <div class="timeline-photo">
      <img src="https://picsum.photos/id/1013/400/600" loading="lazy" alt="Obrázek 3" />
      <div class="timeline-caption">Třetí obrázek má taky dlouhý popisek který potřebuje víc prostoru a rozkliknutí.</div>
    </div>
    <!-- Přidej víc fotek podle potřeby -->
  </div>

  <script>
    // Rozkliknutí popisku
    document.querySelectorAll('.timeline-caption').forEach(caption => {
      caption.addEventListener('click', () => {
        caption.classList.toggle('expanded');
      });
    });

    // Scroll snap na střed fotky po scrollu
    const container = document.getElementById('timeline');
    let isScrolling;
    
    container.addEventListener('scroll', () => {
      window.clearTimeout(isScrolling);
      isScrolling = setTimeout(() => {
        const photos = document.querySelectorAll('.timeline-photo');
        let closest = null;
        let closestDist = Infinity;
        const center = container.scrollLeft + container.offsetWidth / 2;

        photos.forEach(photo => {
          const box = photo.getBoundingClientRect();
          const photoCenter = box.left + box.width / 2;
          const dist = Math.abs(photoCenter - container.offsetWidth / 2);

          if (dist < closestDist) {
            closestDist = dist;
            closest = photo;
          }
        });

        if (closest) {
          closest.scrollIntoView({ behavior: "smooth", inline: "center", block: "nearest" });
        }
      }, 100);
    });
  </script>

</body>
</html>