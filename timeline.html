<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Timeline Galerie</title>
  <style>
    body {
      margin: 0;
      background: black;
      overflow-x: hidden;
    }

    .timeline-gallery {
      display: flex;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      height: 80vh;
      scroll-behavior: smooth;
    }

    .timeline-gallery::-webkit-scrollbar {
      display: none;
    }

    .timeline-photo {
      flex: 0 0 auto;
      scroll-snap-align: start;
      position: relative;
      width: auto;
      max-width: 100vw;
      height: 100%;
      aspect-ratio: 2 / 3;
      object-fit: cover;
      object-position: center;
    }

    .timeline-photo-container {
      position: relative;
      height: 100%;
      min-width: calc(80vh * 2 / 3); /* výška x poměr */
      max-width: calc(80vh * 2 / 3);
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .timeline-caption {
      position: absolute;
      bottom: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      color: white;
      font-size: 1rem;
      padding: 0.5rem 1rem;
      box-sizing: border-box;
      max-height: 4.5em; /* 3 řádky */
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      cursor: pointer;
      transition: max-height 0.3s ease;
    }

    .timeline-caption.expanded {
      max-height: 100%;
    }
  </style>
</head>
<body>
  <div class="timeline-gallery" id="timelineGallery">
    <div class="timeline-photo-container">
      <img src="https://picsum.photos/400/600?1" class="timeline-photo" loading="lazy" />
      <div class="timeline-caption">Tahle fotka má popis na tři řádky. Pokud bude text delší, můžeš ho rozkliknout a zobrazit celý popis. Klikni pro víc!</div>
    </div>
    <div class="timeline-photo-container">
      <img src="https://picsum.photos/400/600?2" class="timeline-photo" loading="lazy" />
      <div class="timeline-caption">Další krásný moment z mého života v latexu. Kliknutím můžeš zobrazit celý text.</div>
    </div>
    <div class="timeline-photo-container">
      <img src="https://picsum.photos/400/600?3" class="timeline-photo" loading="lazy" />
      <div class="timeline-caption">Příběh každé fotky žije ve stínech za ní... a ty můžeš kliknout a číst dál.</div>
    </div>
    <!-- Přidej další fotky stejným způsobem -->
  </div>

  <script>
    document.querySelectorAll('.timeline-caption').forEach(caption => {
      caption.addEventListener('click', () => {
        caption.classList.toggle('expanded');
      });
    });

    // Jemné scrollování
    const gallery = document.getElementById('timelineGallery');
    let isDown = false;
    let startX;
    let scrollLeft;

    gallery.addEventListener('mousedown', (e) => {
      isDown = true;
      gallery.classList.add('active');
      startX = e.pageX - gallery.offsetLeft;
      scrollLeft = gallery.scrollLeft;
    });

    gallery.addEventListener('mouseleave', () => {
      isDown = false;
      gallery.classList.remove('active');
    });

    gallery.addEventListener('mouseup', () => {
      isDown = false;
      gallery.classList.remove('active');
    });

    gallery.addEventListener('mousemove', (e) => {
      if (!isDown) return;
      e.preventDefault();
      const x = e.pageX - gallery.offsetLeft;
      const walk = (x - startX) * 1; // citlivost
      gallery.scrollLeft = scrollLeft - walk;
    });

    // Zakázat vertikální scroll kolečkem myši
    gallery.addEventListener('wheel', (e) => {
      if (Math.abs(e.deltaY) > Math.abs(e.deltaX)) {
        e.preventDefault();
      }
    }, { passive: false });
  </script>
</body>
</html>